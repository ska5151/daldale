# 참고

1. `01-database/sql/settings.sql` 참고 (Tables: `categories`, `payment_methods`)
2. `03-frontend/screen/03.settings.md` 참고

# 설정 및 데이터 관리 API 문서

## 1. 개요
사용자 프로필, 카테고리, 결제 수단 등 앱의 전반적인 설정을 관리하는 API 명세서입니다.

## 2. API 목록

### 2.1 사용자 프로필 조회
- **URL**: `/api/user/profile`
- **Method**: `GET`
- **Description**: 현재 로그인된 사용자의 프로필 및 설정 정보를 조회합니다.

#### Response
- **Success (200 OK)**
```json
{
  "code": 200,
  "message": "조회 성공",
  "data": {
    "user_id": "user123",
    "nickname": "알뜰이",
    "email": "user@example.com",
    "profileImage": "http://...",
    "theme": "system",
    "notificationEnabled": true
  }
}
```

### 2.2 사용자 설정 변경
- **URL**: `/api/user/settings`
- **Method**: `PUT`
- **Description**: 테마, 알림 설정 등 사용자 환경 설정을 업데이트합니다.

#### Request Body
| Field | Type | Required | Description |
|---|---|---|---|
| theme | string | N | 'system', 'light', 'dark' 중 하나 |
| notificationEnabled | boolean | N | 알림 활성화 여부 |
| nickname | string | N | 닉네임 변경 시 |

#### Response
- **Success (200 OK)**
```json
{
  "code": 200,
  "message": "설정 업데이트 성공"
}
```

### 2.3 카테고리 관리

#### 2.3.1 카테고리 목록 조회
- **URL**: `/api/categories`
- **Method**: `GET`
- **Description**: 사용자의 수입/지출 카테고리 목록을 반환합니다.

#### Response
```json
{
  "code": 200,
  "data": [
    { "categoryId": 1, "name": "식비", "type": "EXPENSE", "sortOrder": 1 },
    { "categoryId": 2, "name": "월급", "type": "INCOME", "sortOrder": 1 }
  ]
}
```

#### 2.3.2 카테고리 추가
- **URL**: `/api/categories`
- **Method**: `POST`
- **Body**: `{ "name": "기타", "type": "EXPENSE" }`

### 2.4 결제 수단 관리

#### 2.4.1 결제 수단 목록 조회
- **URL**: `/api/payment-methods`
- **Method**: `GET`
- **Description**: 사용자가 등록한 결제 수단(카드, 은행 등) 목록을 반환합니다.

#### Response
```json
{
  "code": 200,
  "data": [
    { "paymentMethodId": 1, "name": "삼성카드", "type": "CARD", "color": "#123456" },
    { "paymentMethodId": 2, "name": "우리은행", "type": "BANK", "color": "#abcdef" }
  ]
}
```

#### 2.4.2 결제 수단 추가
- **URL**: `/api/payment-methods`
- **Method**: `POST`
- **Body**: `{ "name": "현대카드", "type": "CARD", "color": "#ff0000" }`

### 2.5 계정 관리

#### 2.5.1 로그아웃
- **URL**: `/api/auth/logout`
- **Method**: `POST`
- **Description**: 서버 측 세션/토큰 무효화 처리를 수행합니다.

#### 2.5.2 회원 탈퇴
- **URL**: `/api/user`
- **Method**: `DELETE`
- **Description**: 사용자 계정과 연관된 모든 데이터를 삭제합니다 (Cascade).
